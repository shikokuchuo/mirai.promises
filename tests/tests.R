library(mirai.promises)
nanotest <- function(x) invisible(x || stop("is not TRUE when expected to be TRUE"))
nanotest(is.promise(p1 <- as.promise(mirai("completed"))))
nanotest(is.promise(p2 <- mirai("completed") %...>% identity()))
nanotest(mirai.promises:::..[["freq"]] == 0.1)
nanotest(is.null(polling(freq = 1000)))
nanotest(mirai.promises:::..[["freq"]] == 1L)
nanotest(is.null(polling()))
nanotest(mirai.promises:::..[["freq"]] == 0.1)
s <- nanonext::socket()
r <- nanonext::recv_aio(s)
nanotest(is.promise(as.promise(r)))
nanonext::stop_aio(r)
close(s)
Sys.sleep(3L)
